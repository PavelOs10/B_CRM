# üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ BarberCRM v4.0

## –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è

```
barber-crm-v4.0/
‚îú‚îÄ‚îÄ üìÇ backend/                    # –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (FastAPI)
‚îÇ   ‚îú‚îÄ‚îÄ main.py                   # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ API (750 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt          # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile               # Docker –æ–±—Ä–∞–∑ –¥–ª—è –±—ç–∫–µ–Ω–¥–∞
‚îÇ
‚îú‚îÄ‚îÄ üìÇ frontend/                   # –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (React)
‚îÇ   ‚îú‚îÄ‚îÄ App.jsx                   # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (1420 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ index.html               # HTML —à–∞–±–ª–æ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ package.json             # NPM –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile               # Docker –æ–±—Ä–∞–∑ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ logo.png                 # –õ–æ–≥–æ—Ç–∏–ø
‚îÇ
‚îú‚îÄ‚îÄ üìÇ .github/                    # GitHub Actions
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ deploy.yml           # –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π (—Å–æ—Ö—Ä–∞–Ω—ë–Ω)
‚îÇ
‚îú‚îÄ‚îÄ üìÑ .env.example               # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ üìÑ .gitignore                # Git –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ üìÑ docker-compose.yml        # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ üìÑ README.md                 # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ üìÑ STRUCTURE.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

### Backend

#### `main.py` (750 —Å—Ç—Ä–æ–∫)
–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±—ç–∫–µ–Ω–¥–∞ —Å:
- **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö** (Pydantic): BranchRegister, MorningEvent, FieldVisit, –∏ –¥—Ä.
- **–£—Ç–∏–ª–∏—Ç—ã**: 
  - `get_sheets_client()` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Google Sheets
  - `create_branch_spreadsheet()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ñ–∏–ª–∏–∞–ª–∞ ‚≠ê –ù–û–í–û–ï
  - `get_branch_spreadsheet_id()` - –ø–æ–ª—É—á–µ–Ω–∏–µ ID —Ç–∞–±–ª–∏—Ü—ã —Ñ–∏–ª–∏–∞–ª–∞ ‚≠ê –ù–û–í–û–ï
  - `ensure_sheet_exists()` - —Å–æ–∑–¥–∞–Ω–∏–µ –ª–∏—Å—Ç–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ
  - `count_records_for_month()` - –ø–æ–¥—Å—á—ë—Ç –∑–∞–ø–∏—Å–µ–π
- **18 API endpoints**:
  - `/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ñ–∏–ª–∏–∞–ª–∞
  - `/login` - –≤—Ö–æ–¥
  - `/morning-events/{branch_name}` - —É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
  - `/field-visits/{branch_name}` - –ø–æ–ª–µ–≤—ã–µ –≤—ã—Ö–æ–¥—ã ‚≠ê –ò–°–ü–†–ê–í–õ–ï–ù –ë–ê–ì –û–¶–ï–ù–ö–ò
  - `/one-on-one/{branch_name}` - –≤—Å—Ç—Ä–µ—á–∏ 1-–Ω–∞-1
  - `/weekly-metrics/{branch_name}` - –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
  - `/newbie-adaptation/{branch_name}` - –∞–¥–∞–ø—Ç–∞—Ü–∏—è –Ω–æ–≤–∏—á–∫–æ–≤
  - `/master-plans/{branch_name}` - –ø–ª–∞–Ω—ã –º–∞—Å—Ç–µ—Ä–æ–≤
  - `/reviews/{branch_name}` - –æ—Ç–∑—ã–≤—ã
  - `/branch-summary/{branch_name}` - —Å–≤–æ–¥–∫–∞
  - `/dashboard-summary/{branch_name}` - –¥–∞—à–±–æ—Ä–¥

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è v4.0**:
- –°—Ç—Ä–æ–∫–∞ ~169: `create_branch_spreadsheet()` - –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
- –°—Ç—Ä–æ–∫–∞ ~183: `get_branch_spreadsheet_id()` - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ç–∞–±–ª–∏—Ü—ã
- –°—Ç—Ä–æ–∫–∞ ~560: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞—Å—á—ë—Ç `overall_score` (–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 5)

#### `requirements.txt`
Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```
fastapi==0.104.1
uvicorn[standard]==0.24.0
gspread==5.12.0
google-auth==2.23.4
pydantic==2.5.0
```

#### `Dockerfile`
Docker –æ–±—Ä–∞–∑ –Ω–∞ –±–∞–∑–µ `python:3.11-slim`

---

### Frontend

#### `App.jsx` (1420 —Å—Ç—Ä–æ–∫)
–ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ –≤—Å–µ–π –ª–æ–≥–∏–∫–æ–π:

**–°–µ–∫—Ü–∏–∏**:
1. **CONFIG** (—Å—Ç—Ä–æ–∫–∏ 1-16): API_BASE_URL, BRANCH_GOALS
2. **API** (—Å—Ç—Ä–æ–∫–∏ 17-41): –§—É–Ω–∫—Ü–∏—è `api.request()`
3. **UTILS** (—Å—Ç—Ä–æ–∫–∏ 42-58): `getWeekNumber()`, `getCurrentMonth()`
4. **ICONS** (—Å—Ç—Ä–æ–∫–∏ 59-125): SVG –∏–∫–æ–Ω–∫–∏
5. **COMPONENTS** (—Å—Ç—Ä–æ–∫–∏ 126-216):
   - `StarRating` - —Ä–µ–π—Ç–∏–Ω–≥ –∑–≤—ë–∑–¥–∞–º–∏
   - `FormInput` - –ø–æ–ª–µ —Ñ–æ—Ä–º—ã
   - `Toast` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   - `InstructionBanner` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
6. **AUTH** (—Å—Ç—Ä–æ–∫–∏ 217-355): –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
7. **MAIN APP** (—Å—Ç—Ä–æ–∫–∏ 356-483): –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
8. **DASHBOARD** (—Å—Ç—Ä–æ–∫–∏ 484-600): –î–∞—à–±–æ—Ä–¥ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
9. **FORMS** (—Å—Ç—Ä–æ–∫–∏ 601-1420): 
   - MorningEventsPage - —É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
   - FieldVisitsPage - –ø–æ–ª–µ–≤—ã–µ –≤—ã—Ö–æ–¥—ã ‚≠ê –ò–°–ü–†–ê–í–õ–ï–ù –ë–ê–ì (—Å—Ç—Ä–æ–∫–∞ 842)
   - OneOnOnePage - 1-on-1 –≤—Å—Ç—Ä–µ—á–∏
   - WeeklyMetricsPage - –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
   - NewbieAdaptationPage - –∞–¥–∞–ø—Ç–∞—Ü–∏—è –Ω–æ–≤–∏—á–∫–æ–≤
   - MasterPlansPage - –ø–ª–∞–Ω—ã –º–∞—Å—Ç–µ—Ä–æ–≤
   - ReviewsPage - –æ—Ç–∑—ã–≤—ã
   - BranchSummaryPage - —Å–≤–æ–¥–∫–∞

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è v4.0**:
- –°—Ç—Ä–æ–∫–∞ 842: `calculateAverage()` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ

#### `index.html`
HTML —à–∞–±–ª–æ–Ω —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º:
- React 18
- ReactDOM 18
- Tailwind CSS (CDN)

#### `package.json`
```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build"
  }
}
```

---

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### `.env.example`
```env
# –í–ê–ñ–ù–û: –í v4.0 —ç—Ç–æ ID –≥–ª–∞–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã!
GOOGLE_SHEET_ID=your_master_spreadsheet_id_here

# JSON –∫–ª—é—á —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
GOOGLE_SERVICE_ACCOUNT_JSON={"type": "service_account", ...}
```

#### `docker-compose.yml`
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç 2 —Å–µ—Ä–≤–∏—Å–∞:
- **backend**: FastAPI –Ω–∞ –ø–æ—Ä—Ç—É 8000
- **frontend**: Nginx –Ω–∞ –ø–æ—Ä—Ç—É 80

–°–µ—Ç—å: `barber_network`

Health check –¥–ª—è backend: `http://localhost:8000/health`

---

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Frontend (React) ‚Üí Backend (FastAPI) ‚Üí Google Sheets API
                                          ‚Üì
                                  –ì–ª–∞–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
                                  (—Å–ø–∏—Å–æ–∫ —Ñ–∏–ª–∏–∞–ª–æ–≤)
                                          ‚Üì
                                  –¢–∞–±–ª–∏—Ü–∞ —Ñ–∏–ª–∏–∞–ª–∞
                                  (–¥–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞)
```

---

## üìä –†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤

| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –°—Ç—Ä–æ–∫ |
|------|--------|-------|
| backend/main.py | ~31 KB | 750 |
| frontend/App.jsx | ~95 KB | 1420 |
| Docker –æ–±—Ä–∞–∑ (backend) | ~450 MB | - |
| Docker –æ–±—Ä–∞–∑ (frontend) | ~25 MB | - |
| **–ò—Ç–æ–≥–æ –∞—Ä—Ö–∏–≤** | ~200 KB | - |

---

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **–Ø–∑—ã–∫**: Python 3.11
- **–§—Ä–µ–π–º–≤–æ—Ä–∫**: FastAPI 0.104
- **–°–µ—Ä–≤–µ—Ä**: Uvicorn
- **Google API**: gspread 5.12
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: Pydantic 2.5

### Frontend
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞**: React 18
- **–°–±–æ—Ä—â–∏–∫**: Vite (–≤ dev —Ä–µ–∂–∏–º–µ)
- **–°—Ç–∏–ª–∏**: Tailwind CSS 3
- **–ò–∫–æ–Ω–∫–∏**: Heroicons (SVG)

### DevOps
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker
- **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è**: Docker Compose
- **CI/CD**: GitHub Actions
- **–í–µ–±-—Å–µ—Ä–≤–µ—Ä**: Nginx (–¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞)

---

## üéØ –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

**Backend**:
```bash
cd backend
pip install -r requirements.txt
uvicorn main:app --reload --port 8000
```

**Frontend**:
```bash
cd frontend
npm install
npm run dev
```

### –ü—Ä–æ–¥–∞–∫—à–Ω

```bash
docker-compose up -d --build
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π (.github/workflows/deploy.yml)
- –°–æ—Ö—Ä–∞–Ω—ë–Ω –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –¢—Ä–∏–≥–≥–µ—Ä: push –≤ main
- –î–µ–π—Å—Ç–≤–∏—è: —Å–±–æ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
Backend –ª–æ–≥–∏—Ä—É–µ—Ç –≤ stdout/stderr:
- INFO: –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ERROR: –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
docker-compose logs -f backend
```

---

**–í–µ—Ä—Å–∏—è**: 4.0.0
**–î–∞—Ç–∞**: –§–µ–≤—Ä–∞–ª—å 2026
